
## 获取vs改变对象的状态
- 对象状态由数据成员的值体现
- 成员函数分类：
  - 获取对象状态（不改变数据成员）
  - 改变对象状态（改变数据成员）

### 示例
```cpp
class Date {
public:
    void set(int y, int m, int d); //改变对象状态
    int get_day(); //获取对象状态
    int get_month(); //获取对象状态
    int get_year(); //获取对象状态
    ......
};
```

## 常成员函数
- 防止在获取状态的成员函数中意外修改数据成员
- 语法：在函数声明后加`const`

### 示例
```cpp
class Date {
public:
    void set(int y, int m, int d); 
    int get_day() const; //常成员函数
    int get_month() const; 
    int get_year() const;
    ......
};

int Date::get_year() const { return year; }
int Date::get_day() const { return day; }
int Date::get_month() const { return month; }
void Date::set(int y, int m, int d) { year=y; month=m; day=d; }
```

### 注意事项
- 只约束对数据成员值的直接修改
- 常量对象只能调用常成员函数

### 示例
```cpp
class A {
    int x;
    char *p;
public:
    void f() const {
        x = 10; //Error
        p = new char[20]; //Error 
        strcpy(p,"ABCD"); //OK（未改变p的值）
    }
};
```

## 静态数据成员
- 实现同类对象间的数据共享
- 对所有对象只有一个拷贝
- 需要类外定义和初始化

### 示例
```cpp
class A {
    int y;
    static int x; //声明
    void f() { y = x; x++; ...... }
};
int A::x=0; //定义及初始化
```

### 内存示例
```cpp
A a1,a2;
// shared: 0
// a1.x: 0, a2.x: 0
// a1.y: 0, a2.y: 0

a1.increase_all();
// shared: 1
// a1.x: 1, a2.x: 0
// a1.y: 1, a2.y: 0
cout << a2.sum_all(); //输出：1
```

## 静态成员函数
- 只能访问静态成员
- 没有隐藏的this参数
- 可通过类名直接调用

### 示例
```cpp
class A {
    int x,y;
    static int shared;
public:
    static int get_shared() { return shared; }
    ......
};
int A::shared=0;

// 调用方式
A a;
cout << a.get_shared();
cout << A::get_shared();
```

## 应用示例：对象计数
```cpp
class A {
    static int obj_count;
public:
    A() { obj_count++; }
    ~A() { obj_count--; }
    static int get_num_of_objects() { return obj_count; }
    ......
};
int A::obj_count=0;

// 使用
cout << A::get_num_of_objects(); //输出对象个数
```