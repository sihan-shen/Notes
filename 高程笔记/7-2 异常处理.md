
## 主要内容
- 异常概述
- C++的异常处理机制

## 异常概述
### 程序的错误类型
1. 语法错误
   - 指程序的书写不符合语言的语法规则
   - 示例：
     - 使用了未定义或未声明的标识符
     - 左右括号不匹配
   - 可由编译程序发现

2. 逻辑错误（或语义错误）
   - 指程序设计不当造成程序没有完成预期的功能
   - 示例：
     - 把两个数相加写成了相乘
     - 排序功能未能正确排序
   - 可通过静态分析和动态测试发现

3. 运行异常
   - 指程序设计对程序运行环境考虑不周而造成的程序运行错误
   - 示例：
     - 对于"x/y"操作，给y输入了"零"
     - 内存空间不足导致的内存访问错误
     - 文件打开错误
   - 特点：
     - 正常情况下不会出现
     - 可以预料但无法避免
     - 需要预见性处理以保证程序鲁棒性(Robustness)

## 异常处理的策略
1. 就地处理
   - 在发现异常错误的地方处理异常
   - 常用做法：
     - 调用`abort()`：立即终止程序，不作善后处理
     - 调用`exit()`：终止前会关闭文件、调用析构函数等

2. 异地处理
   - 在其它地方（非异常发现地）处理异常
   - 实现途径：
     - 通过返回值/指针/引用参数/全局变量通知调用者
       - 缺点：
         - 正常与异常返回值交织
         - 需要额外参数/变量
         - 可读性差
     - 通过结构化异常处理机制

## C++结构化异常处理机制
### 三个关键组件
1. `try`语句块
   - 包含可能遭遇异常的代码
   - 格式：`try { <语句序列> }`

2. `throw`语句
   - 产生异常对象
   - 格式：`throw <表达式>;`
   - 执行后不再继续后续语句

3. `catch`语句块
   - 捕获并处理异常
   - 格式：`catch (<类型> [<变量>]) { <语句序列> }`
   - 必须紧接在`try`后

### 处理流程
1. 无异常时：跳过`catch`，继续执行后续代码
2. 有异常时：
   - 匹配对应类型的`catch`块
   - 执行处理后继续后续代码
   - 若无匹配`catch`，按嵌套规则处理

### 多个catch块
- 一个`try`后可跟多个`catch`块
- 按类型匹配执行对应的处理

## 异常处理的嵌套
- `try`语句可以嵌套
- 异常处理查找顺序：
  1. 内层`catch`
  2. 逐步向外层查找
  3. 若无匹配，调用`terminate()`（默认调用`abort()`）

## 异常处理实现机制（示意）
- 每个函数都有一个catch表
- 进入`try`时记录其后`catch`入口地址
- 执行`throw`时：
  - 沿调用链搜索对应`catch`
  - 退栈处理
  - 跳转到匹配的`catch`入口

## 注意事项
- 函数接口说明应包含：
  - 功能描述
  - 参数和返回值含义
  - 可能抛掷的异常（类型和含义）